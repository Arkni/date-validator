/*! Date Validator - v1.0.2-pre - 8/3/2015
 * https://github.com/Arkni/date-validator/
 * Copyright (c) 2015 Arkni Brahim; Licensed MIT */
!function(){function a(a,b,c){if(!a||!b||!c||4!==a.length||c.length>2||b.length>2)return!1;if(isNaN(a)||isNaN(b)||isNaN(c))return!1;if(c=parseInt(c,10),b=parseInt(b,10),a=parseInt(a,10),1e3>a||a>9999||1>b||b>12)return!1;var d=[31,28,31,30,31,30,31,31,30,31,30,31];return(a%400===0||a%100!==0&&a%4===0)&&(d[1]=29),1>c||c>d[b-1]?!1:!0}function b(a,b,c){var d,e,f;if(a){if(a=a.split(":"),b=b.split(":"),a.length!==b.length)return!1;if(d=b[$.inArray("HH",a)]||void 0,e=b[$.inArray("mm",a)]||void 0,f=b[$.inArray("ss",a)]||void 0,!d||!e||-1!==$.inArray("ss",a)&&!f)return!1;if(isNaN(d)||d.length>2)return!1;if(d=parseInt(d,10),0>d||d>=24||c&&d>12)return!1;if(isNaN(e)||e.length>2)return!1;if(e=parseInt(e,10),0>e||e>59)return!1;if(f){if(isNaN(f)||f.length>2)return!1;if(f=parseInt(f,10),0>f||f>59)return!1}}return!0}function c(a){var b=new Date(parseInt(a,10),0).getFullYear(),c=(new Date).getFullYear();return c>=b+100&&(b+=100),b.toString()}function d(a,b,d){b=b.split(" ")[0],b=b.split(d);var e=12,f=0,g=0,h=a.split(" "),i=h[0].split(d),j=h.length>1?h[1]:null,k=i[$.inArray("YYYY",b)]||(2===i[$.inArray("YY",b)].length?c(i[$.inArray("YY",b)]):i[$.inArray("YY",b)]),l=i[$.inArray("MM",b)]||i[$.inArray("M",b)],m=i[$.inArray("DD",b)]||i[$.inArray("D",b)];return j&&(j=j.split(":"),e=j.length>0?j[0]:null,f=j.length>1?j[1]:null,g=j.length>2?j[2]:null),new Date(k,l-1,m,e,f,g)}$.validator.addMethod("dateValidator",function(e,f,g){if(this.optional(f))return!0;(g===!0||$.isEmptyObject(g))&&(g={format:"DD/MM/YYYY",separator:"/"});var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x=this;if($.isArray(g.format))$.each(g.format,function(a,b){return w=$.validator.methods.dateValidator.call(x,e,f,{format:b,separator:g.separator,minDate:g.minDate,maxDate:g.maxDate}),w?!1:void 0});else{if(h=g.format?g.format:"DD/MM/YYYY",j=g.separator||"/",i=h.split(" "),k=i[0].split(j),l=i.length>1?i[1]:null,s=i.length>2?i[2]:null,m=e.split(" "),n=m[0].split(j),o=m.length>1?m[1]:null,p=n[$.inArray("YYYY",k)]||c(n[$.inArray("YY",k)]),q=n[$.inArray("MM",k)]||n[$.inArray("M",k)],r=n[$.inArray("DD",k)]||n[$.inArray("D",k)],i.length!==m.length)return!1;if(n.length!==k.length)return!1;if(w=a(p,q,r),w&&!b(l,o,s))return!1;switch(g.minDate&&(u=g.minDate instanceof Date?g.minDate:d(g.minDate,h,j)),g.maxDate&&(v=g.maxDate instanceof Date?g.maxDate:d(g.maxDate,h,j)),w&&(t=d(e,h,j)),!0){case g.minDate&&!g.maxDate&&w:w=t.getTime()>=u.getTime();break;case g.maxDate&&!g.minDate&&w:w=t.getTime()<=v.getTime();break;case g.minDate&&g.maxDate&&w:w=t.getTime()>=u.getTime()&&t.getTime()<=v.getTime()}}return w},$.validator.messages.date)}();