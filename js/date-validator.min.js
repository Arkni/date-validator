/*! Date Validator - v1.0.2 - 8/8/2015
 * https://github.com/Arkni/date-validator/
 * Copyright (c) 2015 Arkni Brahim; Licensed MIT */
!function(){function a(a){var b=new Date(parseInt(a,10),0).getFullYear(),c=(new Date).getFullYear();return c>=b+100&&(b+=100),b.toString()}function b(b,c,d){c=c.split(" ")[0],c=c.split(d);var e=12,f=0,g=0,h=b.split(" "),i=h[0].split(d),j=h.length>1?h[1]:null,k=h.length>2?h[2]:null,l=i[$.inArray("YYYY",c)]||(2===i[$.inArray("YY",c)].length?a(i[$.inArray("YY",c)]):i[$.inArray("YY",c)]),m=i[$.inArray("MM",c)]||i[$.inArray("M",c)],n=i[$.inArray("DD",c)]||i[$.inArray("D",c)];return j&&(j=j.split(":"),e=j.length>0?j[0]:null,f=j.length>1?j[1]:null,g=j.length>2?j[2]:null,k&&("am"!==k&&"AM"!==k||12!==e||(e=parseInt(e,10)-12),("pm"===k||"PM"===k)&&12>e&&(e=parseInt(e,10)+12))),new Date(l,m-1,n,e,f,g)}function c(a,b,c){var d,e,f,g,h,i,j,k,l,m=[31,28,31,30,31,30,31,31,30,31,30,31];if(a=a.split(c),b=b.split(c),b.length!==a.length)return!1;if(d=b[$.inArray("YYYY",a)]||b[$.inArray("YY",a)],e=b[$.inArray("MM",a)]||b[$.inArray("M",a)],f=b[$.inArray("DD",a)]||b[$.inArray("D",a)],j=a[$.inArray("YYYY",a)]||a[$.inArray("YY",a)],k=a[$.inArray("MM",a)]||a[$.inArray("M",a)],l=a[$.inArray("DD",a)]||a[$.inArray("D",a)],!d||!e||!f||isNaN(d)||isNaN(e)||isNaN(f))return!1;switch(g=d.length,h=e.length,i=f.length,d=parseInt(d,10),j){case"YY":if(2!==g)return!1;break;case"YYYY":if(4!==g)return!1;if(1e3>d||d>9999)return!1}if(e=parseInt(e,10),1>e||e>12)return!1;switch(k){case"M":if(e>0&9>=e&&1!==h)return!1;break;case"MM":if(2!==h)return!1}if((d%400===0||d%100!==0&&d%4===0)&&(m[1]=29),f=parseInt(f,10),1>f||f>m[e-1])return!1;switch(l){case"D":if(f>0&9>=f&&1!==i)return!1;break;case"DD":if(2!==i)return!1}return!0}function d(a,b,c,d){var e,f,g,h,i,j,k,l,m;if(a){if(a=a.split(":"),b=b.split(":"),a.length!==b.length)return!1;if(h=a[0],i=a[1],j=a[2],c){if(c&&h===h.toUpperCase())throw new SyntaxError("'A' and 'a' tokens are used only with 'h' or 'hh'.");if(!d)return!1;if("A"===c&&"AM"!==d&&"PM"!==d)return!1;if("a"===c&&"am"!==d&&"pm"!==d)return!1}if(e=b[$.inArray(h,a)]||void 0,f=b[$.inArray(i,a)]||void 0,g=b[$.inArray(j,a)]||void 0,!e||!f||j&&!g)return!1;if(k=e.length,l=f.length,isNaN(e)||k>2)return!1;switch(e=parseInt(e,10),h){case"h":case"hh":if(1>e||e>12)return!1;if(e>0&&9>=e&&(1!==k&&"h"===h||2!==k&&"hh"===h))return!1;break;case"H":case"HH":if(0>e||e>23)return!1;if(e>0&&9>=e&&(1!==k&&"H"===h||2!==k&&"HH"===h))return!1}if(isNaN(f)||l>2)return!1;if(f=parseInt(f,10),0>f||f>59)return!1;if(f>0&&9>=f&&(1!==l&&"m"===i||2!==l&&"mm"===i))return!1;if(g){if(m=g.length,isNaN(g)||m>2)return!1;if(g=parseInt(g,10),0>g||g>59)return!1;if(g>0&&9>=g&&(1!==m&&"s"===j||2!==m&&"ss"===j))return!1}}return!0}function e(a,b){var c,d=/D{1,2}|M{1,2}|YY(?:YY)?|([HhmsAa])\1?|"[^"]*"|'[^']*'/g,e=function(a){for(a=""+a;a.length<2;)a="0"+a;return a},f=function(a,b){return"a"===b?12>=a?"am":"pm":12>=a?"AM":"PM"};if(a=a?new Date(a):new Date,isNaN(a))throw new SyntaxError("invalid date");return c={D:a.getDate(),DD:e(a.getDate()),M:a.getMonth()+1,MM:e(a.getMonth()+1),YY:String(a.getFullYear()).slice(2),YYYY:a.getFullYear(),h:a.getHours()%12||12,hh:e(a.getHours()%12||12),H:a.getHours(),HH:e(a.getHours()),m:a.getMinutes(),mm:e(a.getMinutes()),s:a.getSeconds(),ss:e(a.getSeconds()),a:f(a.getHours(),"a"),A:f(a.getHours(),"A")},b.replace(d,function(a){return a in c?c[a]:a.slice(1,a.length-1)})}$.validator.addMethod("dateValidator",function(a,f,g){if($.validator.messages.dateValidator=$.validator.messages.date,this.optional(f))return!0;(g===!0||$.isEmptyObject(g))&&(g={format:"DD/MM/YYYY",separator:"/"});var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=this;if($.isArray(g.format))$.each(g.format,function(b,c){return u=$.validator.methods.dateValidator.call(v,a,f,{format:c,separator:g.separator,minDate:g.minDate,maxDate:g.maxDate}),u?!1:void 0});else{if(h=g.format?g.format:"DD/MM/YYYY",j=g.separator||"/",i=h.split(" "),k=i[0],l=i.length>1?i[1]:null,p=i.length>2?i[2]:null,m=a.split(" "),n=m[0],o=m.length>1?m[1]:null,q=m.length>2?m[2]:null,i.length!==m.length)return!1;if(u=c(k,n,j),u&&!d(l,o,p,q))return!1;switch(g.minDate&&(s=g.minDate instanceof Date?g.minDate:b(g.minDate,h,j)),g.maxDate&&(t=g.maxDate instanceof Date?g.maxDate:b(g.maxDate,h,j)),u&&(r=b(a,h,j)),!0){case g.minDate&&!g.maxDate&&u:u=r.getTime()>=s.getTime(),s=s instanceof Date?e(s,h):s,$.validator.messages.dateValidator=$.validator.format("Please enter a date after {0}.",s);break;case g.maxDate&&!g.minDate&&u:u=r.getTime()<=t.getTime(),t=t instanceof Date?e(t,h):t,$.validator.messages.dateValidator=$.validator.format("Please enter a date before {0}.",t);break;case g.minDate&&g.maxDate&&u:u=r.getTime()>=s.getTime()&&r.getTime()<=t.getTime(),s=s instanceof Date?e(s,h):s,t=t instanceof Date?e(t,h):t,$.validator.messages.dateValidator=$.validator.format("Please enter a date between {0} and {1}.",s,t)}}return u},$.validator.messages.dateValidator)}();