/*! Date Validator - v2.0.0 - 6/20/2016
 * https://github.com/Arkni/date-validator/
 * Copyright (c) 2016 Arkni Brahim; Licensed MIT */
!function(){function a(a){var b=new Date(parseInt(a,10),0).getFullYear(),c=(new Date).getFullYear();return c>=b+100&&(b+=100),b}function b(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w={day:/(D{1,2})/,month:/(M{1,2})/,year:/(YY(?:YY)?)/,hours:/(H{1,2}|h{1,2})/,minutes:/(m{1,2})/,seconds:/(s{1,2})/,amOrPm:/([Aa])/};return k=w.year.exec(b)[1],l=w.month.exec(b)[1],m=w.day.exec(b)[1],n=(v=w.hours.exec(b))?v[1]:"",o=(v=w.minutes.exec(b))?v[1]:"",p=(v=w.seconds.exec(b))?v[1]:"",q=(v=w.amOrPm.exec(b))?v[1]:"",r=a.split(" "),b=b.split(" "),s=b[0].split(c),t=r[0].split(c),u=r[1],j=r[2],d=t[s.indexOf(k)],e=t[s.indexOf(l)],f=t[s.indexOf(m)],u&&(u=u.split(":"),g=u[0],h=u[1],i=u[2]),{day:f,month:e,year:d,hours:g,minutes:h,seconds:i,amOrPm:j,format:{date:b[0],time:b[1]},tokens:{day:m,month:l,year:k,hours:n,minutes:o,seconds:p,amOrPm:q}}}function c(c,d,e){var f=b(c,d,e),g=f.tokens.amOrPm,h=a(f.year),i=f.month,j=f.day,k=f.hours||12,l=f.minutes||0,m=f.seconds||0;return f.format.time&&g&&(/am/i.test(g)&&12===k&&(k=+k-12),/pm/i.test(g)&&12>k&&(k=+k+12)),new Date(h,i-1,j,k,l,m)}function d(a){var b,c,d,e,f,g,h,i,j,k=[31,28,31,30,31,30,31,31,30,31,30,31];if(b=a.year,c=a.month,d=a.day,h=a.tokens.year,i=a.tokens.month,j=a.tokens.day,!b||!c||!d||isNaN(b)||isNaN(c)||isNaN(d))return!1;switch(e=b.length,f=c.length,g=d.length,b=parseInt(b,10),h){case"YY":if(2!==e)return!1;break;case"YYYY":if(4!==e)return!1;if(1e3>b||b>9999)return!1}if(c=parseInt(c,10),1>c||c>12)return!1;switch(i){case"M":if(c>0&9>=c&&1!==f)return!1;break;case"MM":if(2!==f)return!1}if(d=parseInt(d,10),(b%400===0||b%100!==0&&b%4===0)&&(k[1]=29),1>d||d>k[c-1])return!1;switch(j){case"D":if(d>0&9>=d&&1!==g)return!1;break;case"DD":if(2!==g)return!1}return!0}function e(a){var b,c,d,e,f,g,h,i,j,k,l;if(a.format.time){if(k=a.tokens.amOrPm,l=a.amOrPm,e=a.tokens.hours,f=a.tokens.minutes,g=a.tokens.seconds,k){if(k&&e===e.toUpperCase())throw new SyntaxError("'A' and 'a' tokens are only intended to be used with 'h' or 'hh'.");if(!l)return!1;if("A"===k&&!/^[AP]M$/.test(l))return!1;if("a"===k&&!/^[ap]m$/.test(l))return!1}if(b=a.hours,c=a.minutes,d=a.seconds,!b||!c||g&&!d)return!1;if(h=b.length,i=c.length,isNaN(b)||h>2)return!1;switch(b=parseInt(b,10),e){case"h":case"hh":if(1>b||b>12)return!1;if(b>0&&9>=b&&(1!==h&&"h"===e||2!==h&&"hh"===e))return!1;break;case"H":case"HH":if(0>b||b>23)return!1;if(b>0&&9>=b&&(1!==h&&"H"===e||2!==h&&"HH"===e))return!1}if(isNaN(c)||i>2)return!1;if(c=parseInt(c,10),0>c||c>59)return!1;if(c>0&&9>=c&&(1!==i&&"m"===f||2!==i&&"mm"===f))return!1;if(d){if(j=d.length,isNaN(d)||j>2)return!1;if(d=parseInt(d,10),0>d||d>59)return!1;if(d>0&&9>=d&&(1!==j&&"s"===g||2!==j&&"ss"===g))return!1}}return!0}function f(a,b){var c,d=/D{1,2}|M{1,2}|YY(?:YY)?|([HhmsAa])\1?/g,e=function(a){for(a=""+a;a.length<2;)a="0"+a;return a},f=function(a,b){return"a"===b?12>=a?"am":"pm":12>=a?"AM":"PM"};if(a=a?new Date(a):new Date,isNaN(a))throw new SyntaxError("invalid date");return c={D:a.getDate(),DD:e(a.getDate()),M:a.getMonth()+1,MM:e(a.getMonth()+1),YY:String(a.getFullYear()).slice(2),YYYY:a.getFullYear(),h:a.getHours()%12||12,hh:e(a.getHours()%12||12),H:a.getHours(),HH:e(a.getHours()),m:a.getMinutes(),mm:e(a.getMinutes()),s:a.getSeconds(),ss:e(a.getSeconds()),a:f(a.getHours(),"a"),A:f(a.getHours())},b.replace(d,function(a){return a in c?c[a]:a.slice(1,a.length-1)})}function g(a,b,c){var d=a.split(" "),e=b.split(" ");if(e.length!==d.length)return!1;var f=d[0].split(c),g=e[0].split(c);if(f.length!==g.length)return!1;if(e[1]){var h=d[1].split(":"),i=e[1].split(":");if(h.length!==i.length)return!1}return!0}$.validator.addMethod("dateValidator",function(a,h,i){if(this.optional(h))return!0;i=$.extend({},{format:"DD/MM/YYYY",separator:"/"},i);var j,k,l,m=i.format,n=i.separator,o=!0,p=$.validator.messages.dateValidatorMessages;if($.validator.messages.dateValidator=p["default"](m),!g(a,m,n))return!1;var q=b(a,m,n);if(!d(q)||!e(q))return!1;switch(j=c(a,m,n),i.minDate&&(k=i.minDate instanceof Date?i.minDate:c(i.minDate,m,n)),i.maxDate&&(l=i.maxDate instanceof Date?i.maxDate:c(i.maxDate,m,n)),!0){case i.minDate&&!i.maxDate:o=j.getTime()>=k.getTime(),k=i.minDate instanceof Date?f(k,m):i.minDate,$.validator.messages.dateValidator=p.minDate(k);break;case i.maxDate&&!i.minDate:o=j.getTime()<=l.getTime(),l=i.maxDate instanceof Date?f(l,m):i.maxDate,$.validator.messages.dateValidator=p.maxDate(l);break;case!!i.minDate&&!!i.maxDate:o=j.getTime()>=k.getTime()&&j.getTime()<=l.getTime(),k=i.minDate instanceof Date?f(k,m):i.minDate,l=i.maxDate instanceof Date?f(l,m):i.maxDate,$.validator.messages.dateValidator=p.range(k,l)}return o},$.validator.messages.dateValidator),$.extend($.validator.messages,{dateValidatorMessages:{"default":$.validator.format("Please enter a valid date, format {0}."),minDate:$.validator.format("Please enter a date after {0}."),maxDate:$.validator.format("Please enter a date before {0}."),range:$.validator.format("Please enter a date between {0} and {1}.")}})}();