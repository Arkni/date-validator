/*! Date Validator - v1.0.0 - 4/15/2015
 * https://github.com/Arkni/date-validator/
 * Copyright (c) 2015 Arkni Brahim; Licensed MIT */
!function(){function a(a,b,c){if(4!==a.length||c.length>2||b.length>2||!a||!b||!c)return!1;if(isNaN(a)||isNaN(b)||isNaN(c))return!1;if(c=parseInt(c,10),b=parseInt(b,10),a=parseInt(a,10),1e3>a||a>9999||1>b||b>12)return!1;var d=[31,28,31,30,31,30,31,31,30,31,30,31];return(a%400===0||a%100!==0&&a%4===0)&&(d[1]=29),1>c||c>d[b-1]?!1:!0}function b(a){var b=new Date(parseInt(a,10),0).getFullYear(),c=(new Date).getFullYear();return c>=b+100&&(b+=100),b.toString()}function c(a,c,d){a=a.split(d),c=c.split(d);var e=a[$.inArray("YYYY",c)]||(2===a[$.inArray("YY",c)].length?b(a[$.inArray("YY",c)]):a[$.inArray("YY",c)]),f=a[$.inArray("MM",c)]||a[$.inArray("M",c)],g=a[$.inArray("DD",c)]||a[$.inArray("D",c)];return new Date(e,f-1,g,12,0,0)}function d(a,b){b=b.toLowerCase();var c,d,e,f,g=/d{1,2}|m{1,2}|yy(?:yy)?/g,h=function(a,b){for(a=String(a),b=b||2;a.length<b;)a="0"+a;return a};if(a=a?new Date(a):new Date,isNaN(a))throw new SyntaxError("invalid date");return b=String(b),c=a.getDate(),d=a.getMonth(),e=a.getFullYear(),f={d:c,dd:h(c),m:d+1,mm:h(d+1),yy:String(e).slice(2),yyyy:e},b.replace(g,function(a){return a in f?f[a]:a.slice(1,a.length-1)})}$.validator.addMethod("dateValidator",function(e,f,g){if(this.optional(f))return!0;(g===!0||$.isEmptyObject(g))&&(g={format:"DD/MM/YYYY",separator:"/",outputFormat:"DD/MM/YYYY"});var h,i,j,k,l,m,n,o,p,q,r,s=this;if($.isArray(g.format))$.each(g.format,function(a,b){return r=$.validator.methods.dateValidator.call(s,e,f,{format:b,separator:g.separator,minDate:g.minDate,maxDate:g.maxDate}),r?(g.outputFormat?$(f).val(d(c(e,b,g.separator),g.outputFormat)):$.noop(),!1):void 0});else{if(h=g.format?g.format.toUpperCase():"DD/MM/YYYY",i=g.separator||"/",j=h.split(i),k=e.split(i),l=k[$.inArray("YYYY",j)]||b(k[$.inArray("YY",j)]),m=k[$.inArray("MM",j)]||k[$.inArray("M",j)],n=k[$.inArray("DD",j)]||k[$.inArray("D",j)],k.length!==j.length)return!1;switch(r=a(l,m,n),g.minDate&&(p=g.minDate instanceof Date?g.minDate:c(g.minDate,h,i)),g.maxDate&&(q=g.maxDate instanceof Date?g.maxDate:c(g.maxDate,h,i)),r&&(o=new Date(l,m-1,n,12,0,0)),!0){case g.minDate&&!g.maxDate&&r:r=o.getTime()>=p.getTime();break;case g.maxDate&&!g.minDate&&r:r=o.getTime()<=q.getTime();break;case g.minDate&&g.maxDate&&r:r=o.getTime()>=p.getTime()&&o.getTime()<=q.getTime()}r&&g.outputFormat&&$(f).val(d(c(e,h,i),g.outputFormat))}return r},$.validator.messages.date)}();